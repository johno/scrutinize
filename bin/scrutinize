#!/usr/bin/env node

var program = require('commander');
var scrutinize = require('..');
var a11y = require('../lib/a11y');
var pageSpeed = require('../lib/page-speed');
var cssStats = require('../lib/css-stats');
var buildUrlObj = require('../lib/build-url-obj');

var version = '1.1.1'

console.log('Scrutinize CLI (' + version + ')');

program
  .command('a11y [url]')
  .description('scrutinize the accessibility of a url')
  .action(function(url) {
    try {
      a11y({ url: buildUrlObj(url), verbose: true });
    } catch (e) {
      console.log('Scrutinize encountered an error: ' + e);
    }
  });

program
  .command('css [url]')
  .description('scrutinize the CSS of a url')
  .action(function(url) {
    try {
      cssStats({ url: buildUrlObj(url), verbose: true });
    } catch (e) {
      console.log('Scrutinize encountered an error: ' + e);
    }
  });

program
  .command('speed [url]')
  .description('scrutinize the page speed of a url')
  .action(function(url) {
    try {
      pageSpeed({ url: buildUrlObj(url), verbose: true });
    } catch (e) {
      console.log('Scrutinize encountered an error: ' + e);
    }
  });

program
  .command('*')
  .description('scrutinize a url')
  .action(function(url) {
    try {
      scrutinize(url, { verbose: true });
    } catch (e) {
      console.log('Scrutinize encountered an error: ' + e);
    }
  });

program.parse(process.argv);
