#!/usr/bin/env node

var program = require('commander');
var scrutinize = require('..');

var version = '1.0.0'

console.log('Scrutinize CLI (' + version + ')');

program
  .command('a11y [url]')
  .description('scrutinize the accessibility of a url')
  .action(function(url) {
    try {
      scrutinize(url, { verbose: true, skipCSS: true, skipPageSpeed: true }, function() {});
    } catch (e) {
      console.log('Scrutinize encountered an error: ' + e);
    }
  });

program
  .command('css [url]')
  .description('scrutinize the CSS of a url')
  .action(function(url) {
    try {
      scrutinize(url, { verbose: true, skipA11y: true, skipPageSpeed: true }, function() {});
    } catch (e) {
      console.log('Scrutinize encountered an error: ' + e);
    }
  });

program
  .command('speed [url]')
  .description('scrutinize the page speed of a url')
  .action(function(url) {
    try {
      scrutinize(url, { verbose: true, skipCSS: true, skipA11y: true }, function() {});
    } catch (e) {
      console.log('Scrutinize encountered an error: ' + e);
    }
  });


program
  .command('*')
  .description('scrutinize a url')
  .action(function(url) {
    try {
      scrutinize(url, { verbose: true }, function() {});
    } catch (e) {
      console.log('Scrutinize encountered an error: ' + e);
    }
  });

program.parse(process.argv);
